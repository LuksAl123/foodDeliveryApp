"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5085],{5085:(R,l,s)=>{s.r(l),s.d(l,{SearchPageModule:()=>J});var u=s(4755),g=s(5030),o=s(6794),c=s(4517),p=s(5861),h=s(7579),d=s(9841),f=s(5698),t=s(2223),m=s(2158),y=s(7020),S=s(5098),v=s(3001),P=s(8081);const b=["searchInput"];function A(e,r){1&e&&t._UZ(0,"app-loading-restaurant")}function C(e,r){if(1&e&&t._UZ(0,"app-empty-screen",4),2&e){const n=t.oxw();t.Q6J("model",n.model)}}const O=function(e){return["/","tabs","restaurants",e]};function I(e,r){if(1&e&&t._UZ(0,"app-restaurant",6),2&e){const n=r.$implicit;t.Q6J("restaurant",n)("routerLink",t.VKq(2,O,n.uid))}}function T(e,r){if(1&e&&(t.TgZ(0,"ion-list")(1,"ion-list-header")(2,"ion-label")(3,"h4"),t._uU(4),t.qZA()()(),t.YNc(5,I,1,4,"app-restaurant",5),t.qZA()),2&e){const n=t.oxw();t.xp6(4),t.hij('Search results for "',n.query,'"'),t.xp6(1),t.Q6J("ngForOf",n.restaurants)}}const L=[{path:"",component:(()=>{class e{constructor(n,a){this.api=n,this.global=a,this.model={icon:"search-outline",title:"No Restaurants Record Found"},this.restaurants=[],this.startAt=new h.x,this.endAt=new h.x,this.startObs=this.startAt.asObservable(),this.endObs=this.endAt.asObservable(),this.location={}}ngOnInit(){setTimeout(()=>{this.sInput.setFocus()},500),this.querySub=(0,d.a)(this.startObs,this.endObs).subscribe(n=>{console.log(n),this.queryResults(n[0],n[1])})}queryResults(n,a){this.isLoading=!0,this.api.collection("restaurants",i=>i.orderBy("short_name").startAt(n).endAt(a)).valueChanges().pipe((0,f.q)(1)).subscribe(i=>{this.restaurants=i,this.isLoading=!1},i=>{this.isLoading=!1,console.log(i),this.global.errorToast()})}onSearchChange(n){var a=this;return(0,p.Z)(function*(){console.log(n.detail.value),a.query=n.detail.value.toLowerCase(),a.querySearch()})()}querySearch(){this.restaurants=[],this.query.length>0&&(this.startAt.next(this.query),this.endAt.next(this.query+"\uf8ff"))}ngOnDestroy(){this.querySub&&this.querySub.unsubscribe()}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(m.s),t.Y36(y.U))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-search"]],viewQuery:function(n,a){if(1&n&&t.Gf(b,5),2&n){let i;t.iGM(i=t.CRH())&&(a.sInput=i.first)}},decls:8,vars:3,consts:[["animated","true","debounce","800",3,"ionChange"],["searchInput",""],[4,"ngIf"],[3,"model",4,"ngIf"],[3,"model"],[3,"restaurant","routerLink",4,"ngFor","ngForOf"],[3,"restaurant","routerLink"]],template:function(n,a){1&n&&(t.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-searchbar",0,1),t.NdJ("ionChange",function(Q){return a.onSearchChange(Q)}),t.qZA()()(),t.TgZ(4,"ion-content"),t.YNc(5,A,1,0,"app-loading-restaurant",2),t.YNc(6,C,1,1,"app-empty-screen",3),t.YNc(7,T,6,2,"ion-list",2),t.qZA()),2&n&&(t.xp6(5),t.Q6J("ngIf",a.isLoading),t.xp6(1),t.Q6J("ngIf",!a.isLoading&&(0==(null==a.restaurants?null:a.restaurants.length)||0==(null==a.query?null:a.query.length))),t.xp6(1),t.Q6J("ngIf",!a.isLoading&&a.restaurants.length>0))},dependencies:[u.sg,u.O5,o.W2,o.Gu,o.Q$,o.q_,o.yh,o.VI,o.sr,o.j9,o.YI,c.rH,S.m,v.R,P.s],styles:[".ios[_ngcontent-%COMP%]   ion-searchbar[_ngcontent-%COMP%]{margin-top:1rem}"]}),e})()}];let Z=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[c.Bz.forChild(L),c.Bz]}),e})();var M=s(5642);let J=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[u.ez,g.u5,o.Pc,Z,M.K]}),e})()}}]);